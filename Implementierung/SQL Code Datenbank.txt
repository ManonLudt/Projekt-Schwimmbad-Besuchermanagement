IF DB_ID('messenger') IS NULL
    CREATE DATABASE Besuchermanagment;
GO

USE messenger;
GO

IF OBJECT_ID('Besucher') IS NOT NULL
    DROP TABLE Besucher;
GO

IF OBJECT_ID('Status') IS NOT NULL
    DROP TABLE Status;
GO

IF OBJECT_ID('Karten') IS NOT NULL
    DROP TABLE Karten;
GO

IF OBJECT_ID('Schwimmbad') IS NOT NULL
    DROP TABLE Schwimmbad;
GO

create table Besucher
(
	ID_Besucher int primary key IDENTITY(1,1),
	Vorname varchar(100),
	Nachname varchar(100),
	Alter int,
	Status varchar(100)
);

create table Status
(
	ID_Status int primary key IDENTITY(1,1),
	Bezeichnung varchar(100),
	CONSTRAINT fk_besucher_status FOREIGN KEY(ID_Besucher) REFERENCES Nutzer(ID_Besucher)
);

create table Karten
(
	ID_Karten int primary key IDENTITY(1,1),
	Bezeichnung varchar(100),
	Anzahl int,
	Reservierung varchar(100),
	Rabatt double,
	CONSTRAINT fk_besucher_karten FOREIGN KEY(ID_Besucher) REFERENCES Nutzer(ID_Besucher),
	CONSTRAINT fk_schwimmbad_karten FOREIGN KEY(ID_Schwimmbad) REFERENCES Nutzer(ID_Schwimmbad)
);

create table Schwimmbad
(
	ID_Schwimmbad int primary key identity(1,1),
	Name varchar(100),
	Anzahl int
);
